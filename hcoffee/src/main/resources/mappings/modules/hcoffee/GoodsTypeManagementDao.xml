<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
         符号转义说明
    &lt;          < 	
    &gt;          >  
    &lt;&gt;     <>
    &amp;        & 
    &apos;       '
    &quot;       "
  <![CDATA[ 这里写你的SQL或者符号 ]]> 
 -->
<mapper namespace="com.huilian.hlej.hcf.dao.GoodsTypeManagementDao" > 

	<insert id="saveGoodsTypeVo" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			INSERT INTO `hcf_goods_type` (
			  `typeId` ,
			  `typeName` ,
			  `orderFlag`
			)
			VALUES
				(
					#{typeId},
					#{typeName},
					#{orderFlag}
				)
			]]> 
	</insert>
	
	<resultMap id="goodsTypeVoListMap" type="com.huilian.hlej.hcf.vo.GoodsTypeVo">
		<result column="id" property="id" jdbcType="NUMERIC"/>
		<result column="typeId" property="typeId" jdbcType="VARCHAR"/>
		<result column="orderFlag" property="orderFlag" jdbcType="NUMERIC"/>
	</resultMap>

	<select id="getGoodsTypeVoList" resultMap="goodsTypeVoListMap"
		parameterType="com.huilian.hlej.hcf.vo.GoodsTypeVo">
		SELECT
			id,
			typeId,
			typeName,
			orderFlag
		FROM
			hcf_goods_type
		where 1=1
		<if test="typeName != null and  typeName != ''">
			AND hcf_goods_type.typeName = #{typeName}
		</if>
		ORDER BY hcf_goods_type.orderFlag ASC
	</select>
	
	<update id="updateGoodsTypeVo" parameterType="com.huilian.hlej.hcf.vo.GoodsTypeVo">
		UPDATE `hcf_goods_type`
		<set>
			<if test="typeId!=null and typeId!=''">
				typeId = #{typeId},
			</if>
			<if test="typeName!=null and typeName!=''">
				typeName = #{typeName},
			</if>
			<if test="orderFlag!=null and orderFlag!=''">
				orderFlag = #{orderFlag}
			</if>
			<where>
				id = #{id}
			</where>
		</set>
	</update>
	
	<select id="getGoodsTypeVoById" resultType="com.huilian.hlej.hcf.vo.GoodsTypeVo"
		parameterType="java.lang.String">
		SELECT
			id,
			typeId,
			typeName,
			orderFlag
		FROM
			hcf_goods_type
		where id = #{id}
	</select>
	
	<delete id="deleteGoodsTypeVoById" parameterType="java.lang.String">
		DELETE FROM hcf_goods_type WHERE id=#{id}
	</delete>
	
	<select id="isCanDeleteGoodsType" parameterType="java.lang.String" resultType="java.lang.Integer">
		SELECT 
		  COUNT(1) 
		FROM
		  hcf_goods_details t1,
		  hcf_goods_type t2 
		WHERE t1.typeId = t2.id
		  AND t2.id=#{id}
	</select>

</mapper>   
