<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 符号转义说明 &lt; < &gt; > &lt;&gt; <> &amp; & &apos; ' &quot; " <![CDATA[ 
	这里写你的SQL或者符号 ]]> -->
<mapper namespace="com.huilian.hlej.hcf.dao.ChannelManagementDao">

	<insert id="saveChannel" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO `hsh_channel` (
		`channel_id` ,
		`channel_name`,
		`mark` ,
		`remark`,
		`create_time`,
		`data_source` ,
		`data_status`
		)
		VALUES
		(
		#{channelId},
		#{channelName},
		#{mark},
		#{remark},
		now(),
		#{dataSource},
		#{dataStatus}
		);
	</insert>

	<update id="updateChannelStatus" parameterType="com.huilian.hlej.hcf.vo.ChannelVo">
		DELETE from `hsh_channel`
		WHERE id = #{id}

	</update>

	<update id="updateChannelById" parameterType="com.huilian.hlej.hcf.vo.ChannelVo">
		UPDATE `hsh_channel`
		<set>
			<if test="channelId !=null and channelId !=''">
				channel_id = #{channelId},
			</if>
			<if test="channelName !=null and channelName !=''">
				channel_name = #{channelName},
			</if>

			data_status = #{dataStatus},

			mark=#{mark},
			remark=#{remark},

			update_time = now()
		</set>
		WHERE id = #{id}
	</update>


	<select id="getChannelList" resultType="com.huilian.hlej.hcf.vo.ChannelVo"
		parameterType="com.huilian.hlej.hcf.vo.ChannelVo">
		SELECT
		hsh_channel.*
		FROM
		hsh_channel
		where 1=1
		<if test="channelName != null and  channelName != ''">
			AND hsh_channel.channel_name like CONCAT('%','${channelName}','%' )
		</if>
		<if test="startTime != null and  startTime != ''">
			AND hsh_channel.create_time &gt;= #{startTime}
		</if>
		<if test="endTime != null and  endTime != ''">
			AND hsh_channel.create_time &lt;= #{endTime}
		</if>
		<if test="idList != null and  idList != ''">
			AND hsh_channel.id in (${idList})
		</if>
		ORDER BY hsh_channel.create_time DESC
	</select>



	<select id="getChannelManagementPage" resultType="com.huilian.hlej.hcf.vo.ChannelVo"
		parameterType="com.huilian.hlej.hcf.vo.ChannelVo">
		SELECT
		hsh_channel.*
		FROM
		hsh_channel
		where 1=1
		<if test="channelName != null and  channelName != ''">
			AND hsh_channel.channel_name like CONCAT('%','${channelName}','%' )
		</if>
		<if test="startTime != null and  startTime != ''">
			AND hsh_channel.create_time &gt;= #{startTime}
		</if>
		<if test="endTime != null and  endTime != ''">
			AND hsh_channel.create_time &lt;= #{endTime}
		</if>

		ORDER BY hsh_channel.create_time DESC

	</select>

	<select id="getChannelById" resultType="com.huilian.hlej.hcf.vo.ChannelVo"
		parameterType="com.huilian.hlej.hcf.vo.ChannelVo">
		SELECT
		hsh_channel.*
		FROM
		hsh_channel
		WHERE id = #{id}
	</select>


	<select id="getChannelNameByChannelId" resultType="com.huilian.hlej.hcf.vo.ChannelVo"
		parameterType="com.huilian.hlej.hcf.vo.ChannelVo">
		SELECT
		hsh_channel.*
		FROM
		hsh_channel
		WHERE channel_id= #{channelId}
	</select>

	<select id="getChannel" resultType="com.huilian.hlej.hcf.vo.ChannelVo"
		parameterType="com.huilian.hlej.hcf.vo.ChannelVo">
		SELECT
		hsh_channel.*
		FROM
		hsh_channel
		where 1=1
		<if test="channelName!= null and  channelName!= ''">
			AND hsh_channel.channel_name = #{channelName}
		</if>
		<if test="channelId != null and  channelId != ''">
			AND hsh_channel.channel_id = #{channelId}
		</if>
		<if test="mark!= null and  mark!= ''">
			AND hsh_channel.mark = #{mark}
		</if>
		<if test="remark != null and  remark != ''">
			AND hsh_channel.remark = #{remark}
		</if>
	</select>



</mapper>   
