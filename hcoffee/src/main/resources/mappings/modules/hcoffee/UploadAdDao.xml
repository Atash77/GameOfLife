<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
         符号转义说明
    &lt;          < 	
    &gt;          >  
    &lt;&gt;     <>
    &amp;        & 
    &apos;       '
    &quot;       "
  <![CDATA[ 这里写你的SQL或者符号 ]]> 
 -->
<mapper namespace="com.huilian.hlej.hcf.dao.UploadAdDao" > 

		<insert id="saveUploadAd" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO `hkf_upload_ad` (
 		  `channel_id` ,
		  `schemeNo`,
		  `adPath`,
		  `createTime` ,
		  `updateTime` 
		)
		VALUES
			(
				#{channelId},
				#{schemeNo},
				#{adPath},
				now(),
				#{updateTime}
			);
	</insert>
	
	<update id="updateUploadAd" parameterType="com.huilian.hlej.hcf.vo.UploadAdVo" >
	       UPDATE `hkf_upload_ad`
			<set>
				<if test="adPath !=null and adPath !=''">
					adPath = #{adPath},
				</if>
				<if test="adStatus !=null and adStatus !=''">
					adStatus = #{adStatus},
				</if>
				updateTime = now()
			</set>
			WHERE channel_id = #{channelId}	
			and schemeNo = #{schemeNo}	
	       
	    </update>
	    
	    <update id="updateUploadAdById" parameterType="com.huilian.hlej.hcf.vo.UploadAdVo" >
	       UPDATE `hkf_upload_ad`
			<set>
				<if test="channelId !=null and channelId !=''">
					channel_id = #{channelId},
				</if>
				<if test="schemeNo !=null and schemeNo !=''">
					schemeNo = #{schemeNo},
				</if>
				<if test="adPath !=null and adPath !=''">
					adPath = #{adPath},
				</if>
				updateTime = now()
			</set>
			WHERE id = #{id}	
	    </update>
	
	<select id="selectUploadAdList" resultType="com.huilian.hlej.hcf.vo.UploadAdVo" parameterType="com.huilian.hlej.hcf.vo.UploadAdVo">
	        SELECT
				hkf_upload_ad.id as id,
				hkf_upload_ad.channel_id as channelId,
				hkf_upload_ad.schemeNo as schemeNo,
				hsh_channel.channel_name as channelName,
				hsh_activity_scheme.schemeName as schemeName,
				hkf_upload_ad.createTime,
				hkf_upload_ad.adStatus as adStatus
			FROM
				hkf_upload_ad ,
				hsh_channel ,
				hsh_activity_scheme  
			    where hkf_upload_ad.channel_id = hsh_channel.channel_id
			     AND hkf_upload_ad.schemeNo = hsh_activity_scheme.schemeNo 
			<if test="channelId != null and  channelId != ''">
                AND hkf_upload_ad.channel_id  =  #{channelId}
            </if>
            <if test="startTime != null and  startTime != ''">
                AND hkf_upload_ad.createTime    &gt;=  #{startTime}
            </if>
    		<if test="endTime != null and  endTime != ''">
                AND hkf_upload_ad.createTime    &lt;=  #{endTime}
            </if>
            <if test="schemeNo != null and  schemeNo != ''">
                AND hkf_upload_ad.schemeNo   =  #{schemeNo}
            </if>
            
			ORDER BY hkf_upload_ad.createTime DESC
	       
    	</select>
    	
    	<select id="getUploadAd" resultType="com.huilian.hlej.hcf.vo.UploadAdVo" parameterType="com.huilian.hlej.hcf.vo.UploadAdVo">
	        SELECT
				hkf_upload_ad.*,
				hsh_channel.channel_name as channelName,
				hsh_activity_scheme.schemeName as schemeName
			FROM
				hkf_upload_ad ,
				hsh_channel ,
				hsh_activity_scheme  
			    where hkf_upload_ad.channel_id = hsh_channel.channel_id
			    AND hkf_upload_ad.schemeNo = hsh_activity_scheme.schemeNo 
			<if test="channelId != null and  channelId != ''">
                AND hkf_upload_ad.channel_id  =  #{channelId}
            </if>
            <if test="schemeNo != null and  schemeNo != ''">
                AND hkf_upload_ad.schemeNo  =  #{schemeNo}
            </if>
	       
    	</select>
    	
    	<select id="getUploadAdList"  resultType="com.huilian.hlej.hcf.vo.UploadAdVo" parameterType="com.huilian.hlej.hcf.vo.UploadAdVo">
		 SELECT
				hkf_upload_ad.id as id,
				hkf_upload_ad.channel_id as channelId,
				hkf_upload_ad.schemeNo as schemeNo,
				hsh_channel.channel_name as channelName,
				hsh_activity_scheme.schemeName as schemeName,
				hkf_upload_ad.createTime,
				hkf_upload_ad.adStatus as adStatus
			FROM
				hkf_upload_ad ,
				hsh_channel ,
				hsh_activity_scheme  
			    where hkf_upload_ad.channel_id = hsh_channel.channel_id
			     AND hkf_upload_ad.schemeNo = hsh_activity_scheme.schemeNo 
			<if test="channelId != null and  channelId != ''">
                AND hkf_upload_ad.channel_id  =  #{channelId}
            </if>
            <if test="startTime != null and  startTime != ''">
                AND hkf_upload_ad.createTime    &gt;=  #{startTime}
            </if>
    		<if test="endTime != null and  endTime != ''">
                AND hkf_upload_ad.createTime    &lt;=  #{endTime}
            </if>
            <if test="schemeNo != null and  schemeNo != ''">
                AND hkf_upload_ad.schemeNo   =  #{schemeNo}
            </if>
            <if test="idList != null and  idList != ''">
                AND hkf_upload_ad.id   in  (${idList})
            </if>
            
			ORDER BY hkf_upload_ad.createTime DESC
	       
	</select>	
	
</mapper>   
