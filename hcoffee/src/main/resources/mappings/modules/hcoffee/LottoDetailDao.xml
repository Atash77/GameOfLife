<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
         符号转义说明
    &lt;          < 	
    &gt;          >  
    &lt;&gt;     <>
    &amp;        & 
    &apos;       '
    &quot;       "
  <![CDATA[ 这里写你的SQL或者符号 ]]> 
 -->
 <!-- 抽奖活动明细查询 -->
<mapper namespace="com.huilian.hlej.hcf.dao.LottoDetailDao" > 
	
	<resultMap id="lottoDetailListMap" type="com.huilian.hlej.hcf.vo.LottoDetailVo">
		<result column="id" property="id" jdbcType="NUMERIC"/>
		<result column="activityNo" property="activityNo" jdbcType="NUMERIC"/>
		<result column="activityName" property="activityName" jdbcType="NUMERIC"/>
		<result column="vendCode" property="vendCode" jdbcType="VARCHAR"/>
		<result column="userNo" property="userNo" jdbcType="NUMERIC"/>
		<result column="prizeType" property="prizeType" jdbcType="TIMESTAMP"/>
		<result column="prizeName" property="prizeName" jdbcType="VARCHAR"/>
		<result column="createTime" property="createTime" jdbcType="VARCHAR"/>
		<result column="lottoSource" property="lottoSource" jdbcType="VARCHAR"/>
		<result column="status" property="status" jdbcType="VARCHAR"/>
	</resultMap>
	
	<!-- 查询所有代理商 -->
	<select id="getLottoDetailVoList" parameterType="com.huilian.hlej.hcf.vo.LottoDetailVo" resultMap="lottoDetailListMap">
		<![CDATA[
			SELECT 
			  h.activityNo,
			  a.activityName,
			  h.vendCode,
			  h.userNo,
			  h.prizeType,
			  h.prizeName,
			  h.createTime,
			  h.lottoSource,
			  h.status
			FROM
			  hcf_lotto_prize_info AS h LEFT OUTER JOIN hcf_lotto_activity AS a ON h.activityNo=a.activityNo 
			where 1=1
		]]>
		<if test="activityNo != null and activityNo != ''">
            AND h.activityNo like CONCAT('%','${activityNo}','%' )
        </if>
        <if test="vendCode != null and vendCode != ''">
            AND h.vendCode like CONCAT('%','${vendCode}','%' )
        </if>
        <if test="prizeName != null and prizeName != ''">
            AND h.prizeName like CONCAT('%','${prizeName}','%' )
        </if>
        <if test="prizeType != null and prizeType != ''">
            AND h.prizeType  = #{prizeType}
        </if>
        <if test="lottoSource != null and lottoSource != ''">
            AND h.lottoSource  = #{lottoSource}
        </if>
        <if test="startTime != null and  startTime != ''">
	       AND h.createTime &gt;=  #{startTime}
	    </if>
		<if test="endTime != null and  endTime != ''">
	       AND h.createTime &lt;=  #{endTime}
	    </if>
        ORDER BY h.createTime DESC
	</select>
</mapper>   
