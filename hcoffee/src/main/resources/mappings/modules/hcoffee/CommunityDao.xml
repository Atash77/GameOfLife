<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
         符号转义说明
    &lt;          < 	
    &gt;          >  
    &lt;&gt;     <>
    &amp;        & 
    &apos;       '
    &quot;       "
  <![CDATA[ 这里写你的SQL或者符号 ]]> 
 -->
<mapper namespace="com.huilian.hlej.hcf.dao.CommunityDao" > 

		<insert id="saveCommunity" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO `hsh_community` (
 		  `community_id` ,
		  `community_name`,
		  `create_time`,
		  `data_source` ,
		  `data_status` 
		)
		VALUES
			(
				#{communityId},
				#{communityName},
				now(),
				#{dataSource},
				#{dataStatus}
			);
	</insert>
	
	<update id="updateCommunityStatus" parameterType="com.huilian.hlej.hcf.vo.CommunityVo" >
	       UPDATE `hsh_community` set data_status = #{dataStatus}, update_time = now()
			WHERE id = #{id}
	       
    </update>
    
    <update id="updateCommunityById" parameterType="com.huilian.hlej.hcf.vo.CommunityVo" >
       UPDATE `hsh_community`
		<set>
			<if test="communityId !=null and communityId !=''">
				community_id = #{communityId},
			</if>
			<if test="communityName !=null and communityName !=''">
				community_name = #{communityName},
			</if>
			update_time = now()
		</set>
		WHERE id = #{id}	
    </update>
	
	<select id="getCommunityPage" resultType="com.huilian.hlej.hcf.vo.CommunityVo" parameterType="com.huilian.hlej.hcf.vo.CommunityVo">
	        SELECT
				hsh_community.*
			FROM
				hsh_community
			where 1=1	
			<if test="communityName != null and  communityName != ''">
                AND hsh_community.community_name  like  CONCAT('%','${communityName}','%' )
            </if>
            <if test="startTime != null and  startTime != ''">
                AND hsh_community.create_time    &gt;=  #{startTime}
            </if>
    		<if test="endTime != null and  endTime != ''">
                AND hsh_community.create_time    &lt;=  #{endTime}
            </if>
            
			ORDER BY hsh_community.create_time DESC ,hsh_community.id asc
	       
    </select>
    	
	<select id="getCommunityById" resultType="com.huilian.hlej.hcf.vo.CommunityVo" parameterType="com.huilian.hlej.hcf.vo.CommunityVo">
	        SELECT
				hsh_community.*
			FROM
				hsh_community
			WHERE id = #{id}
    </select>
    
	<select id="getCommunity" resultType="com.huilian.hlej.hcf.vo.CommunityVo" parameterType="com.huilian.hlej.hcf.vo.CommunityVo">
	        SELECT
				hsh_community.*
			FROM
				hsh_community
			where 1=1	
			<if test="communityName != null and  communityName != ''">
                AND hsh_community.community_name  =  #{communityName}
            </if>
            <if test="communityId != null and  communityId != ''">
                AND hsh_community.community_id  =  #{communityId}
            </if>
    </select>
    
    
    <select id="getCommunityList"  resultType="com.huilian.hlej.hcf.vo.CommunityVo" parameterType="com.huilian.hlej.hcf.vo.CommunityVo">
		 SELECT
				hsh_community.*
			FROM
				hsh_community
			where 1=1	
			<if test="communityName != null and  communityName != ''">
                AND hsh_community.community_name  like  CONCAT('%','${communityName}','%' )
            </if>
            <if test="startTime != null and  startTime != ''">
                AND hsh_community.create_time    &gt;=  #{startTime}
            </if>
    		<if test="endTime != null and  endTime != ''">
                AND hsh_community.create_time    &lt;=  #{endTime}
            </if>
             <if test="idList != null and  idList != ''">
                AND hsh_community.id   in  (${idList})
            </if>
			ORDER BY hsh_community.create_time DESC
	</select>	
    	
    	
	
</mapper>   
